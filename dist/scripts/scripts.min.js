function Area15Slider(e){var o,n=this;this.index=1,o={name:"Area 15 Slider",slide:$(".slide"),getNextPosition:function(){return $(n.slide[n.index-1]).position()},getCurrentSlide:function(){return $(n.slide[n.index-1])},container:$(".slider-container"),navControl:$(".nav-control"),hasProgress:!1,slideTime:1.25},$.extend(!0,o,e),this.name=o.name,this.slide=o.slide,this.current=$(n.slide[0]),this.slides=o.slide.length,this.container=o.container,this.navControl=o.navControl,this.slideTime=o.slideTime,o.hasProgress&&(n.progress={percentage:0,updateProgress:function(){$(".nav-progress-number").html(slider.progress.percentage+"%")}}),this.endpointReset=function(){TweenMax.to(n.container,.35,{x:0,ease:Power1.easeOut})},this.init=function(){this.moveSlide()},this.moveSlide=function(){n.navControl.on("click",function(e){var t,i,a,r,s,l=n.container;if(o.hasProgress&&(a=n.progress.percentage,r=$(".nav-progress-indicator-container"),s=$(".nav-progress-indicator")),$(this).hasClass("nav-previous")){if(1==n.index)return TweenMax.to(l,.35,{x:"+=75px",ease:Power2.easeIn,onComplete:n.endpointReset});n.index=n.index-1,t=o.getNextPosition(),i=1*t.left,o.hasProgress&&(a=(n.index-1)/(n.slides-1)*100)}else{if(n.index==n.slides)return TweenMax.to(l,.35,{x:"-=75px",ease:Power2.easeIn,onComplete:n.endpointReset});n.index=n.index+1,t=o.getNextPosition(),i=1*t.left,o.hasProgress&&(a=(n.index-1)/(n.slides-1)*100)}o.hasProgress&&TweenMax.to(r,1.1,{x:a+"%",ease:Back.easeOut.config(1)}),n.current=o.getCurrentSlide(),TweenMax.to(l,n.slideTime,{scrollTo:{x:i},ease:Power1.easeOut,force3D:!0,immediateRender:!0}),$(window).resize(function(e){t=o.getNextPosition(),i=1*t.left,TweenMax.set(l,{scrollTo:{x:i},ease:Power1.easeOut})})})},this.loadNextScene=""}function FifteenFourVideoPlayer(e){var o,n=this;o={name:"Area 15 Video Player",container:$(".MMVP-video")},$.extend(!0,o,e),this.name=o.name,this.container=o.container,this.video="",this.isUserActive="",this.init=function(){n.container.find("video").removeAttr("controls"),n.video=modal.current.find("video")[0],n.isUserActive=!0,n.playPause.init(),n.progress.init(),n.volume.init(),n.contextMenu(),n.autoHideControls.init(),n.keyboardShortcuts.init(),(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)&&n.fullscreen.init()},this.playPause={playVideo:"",pauseVideo:"",init:function(){n.container.find(".MMVP-video-controls-play-pause").on("click",function(){n.video.paused?n.video.play():n.video.pause()}),modal.videoPlayer.playPause.playVideo=function(){n.container.find(".MMVP-video-controls-play-pause").addClass("MMVP-play-controls-play-pause-pause-state"),n.autoHideControls.changeUserActivity(),n.autoHideControls.setActivityCheck()},modal.videoPlayer.playPause.pauseVideo=function(){n.container.find(".MMVP-video-controls-play-pause").removeClass("MMVP-play-controls-play-pause-pause-state"),window.clearInterval(n.autoHideControls.activityCheck),window.clearTimeout(n.autoHideControls.inactivityTimeout),n.container.find(".modal-video-inner-container").removeClass("MMVP-inactive")},n.video.addEventListener("play",n.playPause.playVideo,!1),n.video.addEventListener("pause",n.playPause.pauseVideo,!1)}},this.progress={updateProgressIndicator:"",updateProgressBar:"",updateProgress:"",init:function(){function e(e){0>e?e=0:e>100&&(e=100);var o=modal.videoPlayer.video.duration*(e/100);n.video.currentTime=o,n.progress.updateProgress()}var o=n.video.duration;Number.prototype.toHHMMSS=function(){var e,o=this,n=Math.floor(o/3600),t=Math.floor((o-3600*n)/60),i=Math.floor(o-3600*n-60*t);return 10>n&&(n="0"+n),10>t&&(t="0"+t),10>i&&(i="0"+i),e=n>0?n+":"+t+":"+i:t+":"+i},n.progress.updateProgressIndicator=function(){n.container.find(".MMVP-video-progress-indicator").html('<span class="MMVP-video-current-time">'+modal.videoPlayer.video.currentTime.toHHMMSS()+"</span> / "+o.toHHMMSS())},n.progress.updateProgressBar=function(){var e=n.video.currentTime/o*100;e>100?e=100:0>e&&(e=0),n.container.find(".MMVP-video-progress-bar").css("width",e+"%")},n.progress.updateProgress=function(){n.progress.updateProgressIndicator(),n.progress.updateProgressBar()},n.video.addEventListener("timeupdate",n.progress.updateProgress,!1),n.container.find(".MMVP-video-progress-bar-interaction").on("mousedown",function(o){var t=n.container.find(".MMVP-video-progress-bar-container").offset(),i=n.container.find(".MMVP-video-progress-bar-container").width(),a=(o.pageX-t.left)/i*100;e(a)}),n.container.find(".MMVP-video-progress-grabber-interaction").on("mousedown",function(o){o.stopPropagation(),o.preventDefault();var t=!0;n.video.paused||(n.video.pause(),t=!1),n.container.find(".MMVP-video-progress-bar").css("transition","0s");var i=n.container.find(".MMVP-video-progress-bar-container").offset(),a=o.pageX-i.left,r=n.container.find(".MMVP-video-progress-bar-container").width(),s=a/r*100;e(s),$(window).on("mousemove",function(o){o.preventDefault(),a=o.pageX-i.left,s=a/r*100,e(s)}),$(window).on("mouseup",function(){$(window).off("mousemove"),n.container.find(".MMVP-video-progress-bar").css("transition",""),t||n.video.play()})}),n.progress.updateProgress()}},this.volume={checkVolume:function(e){var o=n.container.find(".MMVP-video-controls-volume");return e>0?(e>100&&(e=100),n.video.muted&&(video.muted=!1,o.removeClass("MMVP-video-controls-volume-muted")),e>=66&&o.removeClass("MMVP-video-controls-volume-muted MMVP-video-controls-volume-quiet MMVP-video-controls-volume-normal"),e>=33&&66>e&&!o.hasClass("MMVP-video-controls-volume-normal")&&(o.removeClass("MMVP-video-controls-volume-muted MMVP-video-controls-volume-quiet MMVP-video-controls-volume-normal"),o.addClass("MMVP-video-controls-volume-normal")),33>e&&e>0&&!o.hasClass("MMVP-video-controls-volume-quiet")&&(o.removeClass("MMVP-video-controls-volume-muted MMVP-video-controls-volume-normal"),o.addClass("MMVP-video-controls-volume-quiet"))):0>=e&&(e=0,n.video.muted=!0,o.addClass("MMVP-video-controls-volume-muted")),e},changeVolumeSlider:function(e){var o=n.container.find(".MMVP-volume-slider-container").height(),t=(100-e)/100*o,i=n.volume.checkVolume(e);n.container.find(".MMVP-volume-slider-grabber-interaction").css("top",t),n.video.volume=i/100},init:function(){n.container.find(".MMVP-video-controls-volume").on("click",function(){var e=n.video.volume;n.video.muted?n.video.muted&&0===n.video.volume?n.volume.changeVolumeSlider(50):(n.volume.checkVolume(100*e),n.video.volume=e):n.volume.checkVolume(0)}),n.container.find(".MMVP-volume-slider-grabber-interaction").on("mousedown",function(e){$(window).on("mousemove",function(e){e.preventDefault();var o=n.container.find(".MMVP-volume-slider-container").offset(),t=e.pageY-o.top,i=n.container.find(".MMVP-volume-slider-container").height();if(t>-1&&i>t){var a=Math.floor(99-t/i*100);n.volume.changeVolumeSlider(a)}}),$(window).on("mouseup",function(){$(window).off("mousemove")})}),n.container.find(".MMVP-volume-slider-box").on("click",function(e){e.preventDefault();var o=n.container.find(".MMVP-volume-slider-container").offset(),t=e.pageY-o.top,i=n.container.find(".MMVP-volume-slider-container").height();if(t>-1&&i>t){var a=Math.floor(99-t/i*100);n.volume.changeVolumeSlider(a,!1)}else-1>=t?n.volume.changeVolumeSlider(100):t>=i&&n.volume.changeVolumeSlider(0)}),n.container.find(".MMVP-video-controls").on({mouseenter:function(e){window.clearInterval(n.autoHideControls.activityCheck),window.clearTimeout(n.autoHideControls.inactivityTimeout)},mousemove:function(e){e.stopPropagation(),n.autoHideControls.inactivityTimeout&&(window.clearInterval(n.autoHideControls.activityCheck),window.clearTimeout(n.autoHideControls.inactivityTimeout),n.autoHideControls.inactivityTimeout=!1)},mouseleave:function(e){n.video.paused||n.autoHideControls.setActivityCheck()}})}},this.fullscreen={fullscreenChange:"",init:function(){var e=n.container.find(".modal-video-inner-container")[0];n.container.find(".MMVP-video-controls-fullscreen-toggle").on("click",function(){null===document.fullscreenElement||null===document.webkitFullscreenElement||null===document.mozFullScreenElement||null===document.msFullscreenElement?e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen():document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}),n.fullscreen.fullscreenChange=function(){null===document.fullscreenElement||null===document.webkitFullscreenElement||null===document.mozFullScreenElement||null===document.msFullscreenElement?n.container.find(".MMVP-video-controls-fullscreen-toggle").removeClass("MMVP-fullscreen-toggle-fullscreen-state"):n.container.find(".MMVP-video-controls-fullscreen-toggle").addClass("MMVP-fullscreen-toggle-fullscreen-state")},document.addEventListener("fullscreenchange",n.fullscreen.fullscreenChange),document.addEventListener("webkitfullscreenchange",n.fullscreen.fullscreenChange),document.addEventListener("mozfullscreenchange",n.fullscreen.fullscreenChange),document.addEventListener("MSFullscreenChange",n.fullscreen.fullscreenChange)}},this.contextMenu=function(){var e=n.video;e.addEventListener("contextmenu",function(e){e.preventDefault()},!1)},this.autoHideControls={userActivity:"",changeUserActivity:"",activityCheck:"",inactivityTimeout:"",setActivityCheck:function(){var e=n.container.find(".modal-video-inner-container");n.autoHideControls.activityCheck=window.setInterval(function(){n.autoHideControls.userActivity&&(n.autoHideControls.userActivity=!1,n.isUserActive||(n.isUserActive=!0,e.removeClass("MMVP-inactive")),n.autoHideControls.inactivityTimeout&&window.clearTimeout(n.autoHideControls.inactivityTimeout),n.autoHideControls.inactivityTimeout=window.setTimeout(function(){n.autoHideControls.userActivity||(n.isUserActive=!1,e.addClass("MMVP-inactive"))},5e3))},250)},init:function(){n.autoHideControls.changeUserActivity=function(){n.autoHideControls.userActivity||(n.autoHideControls.userActivity=!0)},n.video.addEventListener("mousemove",n.autoHideControls.changeUserActivity)}},this.keyboardShortcuts={processKeyboardShortcuts:function(e){switch(e.preventDefault(),e.which){case 32:n.video.paused?n.video.play():n.video.pause();break;case 77:n.video.muted?(n.video.muted=!1,n.container.find(".MMVP-video-controls-volume").removeClass("MMVP-video-controls-volume-muted")):(n.video.muted=!0,n.container.find(".MMVP-video-controls-volume").addClass("MMVP-video-controls-volume-muted"))}n.autoHideControls.changeUserActivity()},init:function(){$(document).on("keydown",n.keyboardShortcuts.processKeyboardShortcuts)}},this.reset=function(){n.video&&($(window).off("mouseup"),n.video.pause(),n.container.find(".MMVP-video-progress-grabber-interaction").off("mousedown"),n.container.find(".MMVP-video-progress-bar-interaction").off("mousedown"),n.container.find(".MMVP-volume-slider-container").off("click"),n.container.find(".MMVP-video-controls").off("mouseenter mousemove mouseleave"),n.container.find(".MMVP-video-controls-volume").off("click"),n.container.find(".MMVP-video-controls-play-pause").off("click"),n.container.find(".MMVP-video-controls-fullscreen-toggle").off("click"),n.video.removeEventListener("play",n.playPause.playVideo),n.video.removeEventListener("pause",n.playPause.pauseVideo),n.video.removeEventListener("timeupdate",n.progress.updateProgress),n.video.removeEventListener("mousemove",n.autoHideControls.timer),window.clearInterval(n.autoHideControls.activityCheck),document.removeEventListener("fullscreenchange",n.fullscreen.fullscreenChange),document.removeEventListener("webkitfullscreenchange",n.fullscreen.fullscreenChange),document.removeEventListener("mozfullscreenchange",n.fullscreen.fullscreenChange),document.removeEventListener("MSFullscreenChange",n.fullscreen.fullscreenChange),$(document).off("keydown",n.keyboardShortcuts.processKeyboardShortcuts))}}var slider=new Area15Slider({name:"Main Slider",hasProgress:!0}),modal={current:"",init:function(){modal.loadModels.init();var e=new Area15Slider({name:"Modal Slider",navControl:$(".modal-nav-control"),slideTime:.8});modal.slider=e,modal.slider.init();var o=new FifteenFourVideoPlayer({name:"Modal Video Player"});modal.videoPlayer=o,$(".js-modal").on("click",function(o){o.preventDefault(),modal.current=$($(this).data("target")),e.slide=modal.current.find(".modal-slide"),e.slides=e.slide.length,e.current=$(e.slide[e.index-1]),e.container=modal.current.find(".modal-slide-container"),e.navControl=modal.current.find(".modal-nav-control"),modal.slider.slides>1&&modal.current.find(".modal-nav-control").css("display","inline"),modal.current.find(".MMVP-video").length&&(modal.videoPlayer.container=modal.current.find(".MMVP-video"),modal.videoPlayer.init()),modal.current.find(".modal-model-container").length&&(modal.slider.loadNextScene={scene:"",controls:"",currentModelPath:"",currentModelCameraPosition:"",currentModelPosition:"",init:function(){function e(){function e(e){for(var o in e)e[o]=Number(e[o]);return e}function n(){modal.slider.canvas.find(".webgl-rendering-indicator").removeClass("loading-in-progress"),modal.slider.canvas.find(".webgl-rendering-indicator").addClass("loading-done")}var r="",s=e(modal.slider.loadNextScene.currentModelPosition),l=e(modal.slider.loadNextScene.currentModelCameraPosition);$(".modal-model-container").each(function(e){return $(this).is(modal.slider.canvas)?void(r=e):void 0});var d=modal.loadModels.models[r].mesh,u=modal.loadModels.models[r].edges;i.add(d),i.add(u),d.position.set(s[0],s[1],s[2]),u.position.set(s[0],s[1],s[2]),v=(new THREE.Box3).setFromObject(d);var m=Math.max(v.max.x,v.max.y,v.max.z);c.minDistance=1.25*m,c.maxDistance=5*m,a.position.z=3*m,a.position.set(l[0],l[1],l[2]),a.lookAt(new THREE.Vector3(s[0],s[1],s[2])),TweenMax.to(t,1.5,{autoAlpha:1,ease:Power1.easeIn,delay:2,onComplete:n}),o()}function o(){i=modal.slider.loadNextScene.scene,c=modal.slider.loadNextScene.controls,null!==i&&(c.update(),n())}function n(){u.render(modal.slider.loadNextScene.scene,a)}modal.slider.canvas=modal.slider.current.find(".modal-model-container"),modal.slider.loadNextScene.currentModelPath=modal.slider.canvas.data("model-path"),modal.slider.loadNextScene.currentModelCameraPosition=modal.slider.canvas.data("camera-position").split(" "),modal.slider.loadNextScene.currentModelPosition=modal.slider.canvas.data("model-position").split(" ");var t,i,a,r,s,l,d,c,u,m,v;t=modal.slider.canvas.find("canvas"),modal.slider.loadNextScene.scene=new THREE.Scene,i=modal.slider.loadNextScene.scene,a=new THREE.PerspectiveCamera(45,modal.slider.canvas.width()/modal.slider.canvas.height(),.1,1e4),r=new THREE.HemisphereLight(16777147,526368,.5),i.add(r),s=new THREE.SpotLight(15792383),s.position.set(5,5,0),s.castShadow=!0,s.shadowMapWidth=1024,s.shadowMapHeight=1024,s.shadowCameraNear=500,s.shadowCameraFar=4e3,s.shadowCameraFov=30,s.intensity=5,i.add(s),l=s.clone(),l.position.set(0,6,2),l.intensity=1,i.add(l),d=s.clone(),d.position.set(-8,-2,-4),d.color.setHex(1447718),d.intensity=5,i.add(d),modal.slider.loadNextScene.controls=new THREE.OrbitControls(a,modal.slider.canvas[0]),c=modal.slider.loadNextScene.controls,c.addEventListener("change",n),m=new THREE.JSONLoader,u=new THREE.WebGLRenderer({alpha:!0,canvas:t[0],antialias:!0}),u.setSize(modal.slider.canvas.width(),modal.slider.canvas.height()),e(),$(window).resize(function(e){var o=modal.slider.canvas.width(),t=modal.slider.canvas.height();a.aspect=o/t,a.updateProjectionMatrix(),u.setSize(o,t),n()})}},e.loadNextScene.init&&modal.current.find(".modal-model-container").length&&e.loadNextScene.init()),modal.slider.reset=function(){modal.slider.loadNextScene&&(modal.slider.loadNextScene.controls.dispose(),modal.slider.loadNextScene.controls=null,modal.slider.loadNextScene.scene=null),modal.slider.index=1,modal.slider.current="",modal.slider.slides="",TweenMax.set(modal.current.find(".modal-slide-container"),{scrollTo:{x:0}})},modal.current.addClass("is-staged is-visible")}),$(".modal__box").on("click",function(e){e.stopPropagation()}),$(".js-close-modal").on("click",function(e){e.preventDefault(),modal.closeModal()})},closeModal:function(){modal.current.removeClass("is-visible"),window.setTimeout(function(){modal.current.removeClass("is-staged"),modal.slider.reset(),modal.videoPlayer.reset()},250)},loadModels:{canvases:[],loaders:[],models:[],counter:0,init:function(){$(".modal-model-container").each(function(e){modal.loadModels.canvases[e]=$(this),modal.loadModels.loaders[e]=new THREE.JSONLoader;var o=$(this).data("model-path"),n=modal.loadModels.loaders[e],t=function(o,n){modal.loadModels.models[e]={};var t=new THREE.Mesh(o,new THREE.MeshPhongMaterial({color:"#101010",side:THREE.DoubleSide,emissive:"#000000",specular:"#111111",shininess:20,shading:THREE.SmoothShading,transparent:!0,opacity:.8})),i=new THREE.EdgesHelper(t,"rgb(200,200,200)");i.material.transparency=!0,i.material.opacity=.8,i.material.linewidth=.15,t.position.set(0,-1,0),t.scale.set(.1,.1,.1),modal.loadModels.models[e].mesh=t,modal.loadModels.models[e].edges=i};n.load(o,t),modal.loadModels.counter=modal.loadModels.counter++,modal.loadModels.counter==$(".modal-model-container").length})}}},uiActiveStates={current:"",activeState:"",rotateRight:"",flicker:$(".js-ui-flicker"),init:function(){$(".js-ui-interactive").hover(function(){uiActiveStates.current=$(this),uiActiveStates.activeState=uiActiveStates.current.find(".js-ui-active"),uiActiveStates.rotateRight=uiActiveStates.current.find(".js-ui-rotate-right"),TweenMax.to(uiActiveStates.activeState,.65,{autoAlpha:1}),TweenMax.to(uiActiveStates.rotateRight,.65,{rotation:45,ease:Power1.easeOut,force3D:!0})},function(){TweenMax.to(uiActiveStates.activeState,.65,{autoAlpha:0}),TweenMax.to(uiActiveStates.rotateRight,.65,{rotation:0,ease:Power1.easeOut,force3D:!0})}),uiActiveStates.animateFlicker()},animateFlicker:function(){uiActiveStates.flicker.each(function(e){var o=$(this),n=function(){var e=4*Math.random();TweenMax.to(o,e,{autoAlpha:1,yoyo:!0,repeat:1,onComplete:n})};n()})}},loadingScreen={init:function(){TweenMax.to(".loading-indicator, .area-15-logo",2,{opacity:1,onComplete:loadingScreen.runAnimationsOnce,delay:.5})},runAnimationsOnce:function(){TweenMax.to($(".slider-container"),1,{scrollTo:{x:3e3},force3D:!0,yoyo:!0,repeat:1,onComplete:loadingScreen.clearScreen})},clearScreen:function(){var e=$(".loading-screen");e.removeClass("is-visible"),window.setTimeout(function(){e.removeClass("is-staged"),e.addClass("is-hidden")},250)}},tooltips={current:"",title:"",computeMousePosition:function(e,o){var n=e-0,t=o-0;tooltips.mousePos.x=n,tooltips.mousePos.y=t},init:function(){$(".js-tooltip").hover(function(e){tooltips.current=$(this),tooltips.title=tooltips.current.data("title"),$(".tooltip-text").html(tooltips.title),$(".tooltip-text").addClass("tooltip-reveal"),TweenMax.to(".tooltip",.35,{autoAlpha:1})},function(e){$(".tooltip-text").removeClass("tooltip-reveal"),TweenMax.to(".tooltip",.35,{autoAlpha:0})}),$(".js-tooltip").on("mousemove",function(e){var o=e.pageX,n=e.pageY;$(".tooltip").css({left:o,top:n-25})})}},dynamicImageLoad={checkAndReplace:function(e){e.each(function(e){var o,n,t,i,a,r;o=$(this),"none"!==$(this).css("background-image")?(n=function(e){o.css("background-image",e)},t=$(this).css("background-image")):(n=function(e){o.attr("src",e)},t=$(this).attr("high-res-src")),i=t.lastIndexOf("/"),a=t.lastIndexOf("."),window.matchMedia("(-webkit-min-device-pixel-ratio: 1.5) and (min-resolution: 144dpi)").matches?n(t):(r=t.slice(0,i)+"/low-res"+t.slice(i,a)+"-low-res"+t.slice(a,t.length),n(r))})},init:function(){dynamicImageLoad.checkAndReplace($("img, .slide, .nav-progress-indicator, .scroll-teeth"))}};$(document).ready(function(e){dynamicImageLoad.init(),loadingScreen.init()}),$(window).load(function(e){slider.init(),modal.init(),uiActiveStates.init(),tooltips.init()});