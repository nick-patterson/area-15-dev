function Area15Slider(e){var n,i=this;this.index=1,n={name:"Area 15 Slider",slide:$(".slide"),getNextPosition:function(){return $(i.slide[i.index-1]).position()},getCurrentSlide:function(){return $(i.slide[i.index-1])},container:$(".slider-container"),navControl:$(".nav-control"),hasProgress:!1,slideTime:1.25},$.extend(!0,n,e),n.hasProgress&&(i.progress={percentage:0,updateProgress:function(){$(".nav-progress-number").html(slider.progress.percentage+"%")}}),this.endpointReset=function(){TweenMax.to(i.container,.35,{x:0,ease:Power1.easeOut})},this.init=function(){i.name=n.name,i.slide=n.slide,i.current=$(i.slide[0]),i.slides=n.slide.length,i.container=n.container,i.navControl=n.navControl,i.slideTime=n.slideTime,i.events()},this.events=function(){i.navControl.on("click",function(e){$(this).hasClass("nav-previous")?i.moveSlide("previous"):i.moveSlide("next")})},this.DOMReset=function(){n.slide=$(n.slide.selector),n.container=$(n.container.selector),n.navControl=$(n.navControl.selector),i.init()},this.moveSlide=function(e){var s,t,o,r,a,l=i.container;if(n.hasProgress&&(o=i.progress.percentage,r=$(".nav-progress-indicator-container"),a=$(".nav-progress-indicator")),"previous"===e){if(1==i.index)return TweenMax.to(l,.35,{x:"+=75px",ease:Power2.easeIn,onComplete:i.endpointReset});i.index=i.index-1,s=n.getNextPosition(),t=1*s.left,n.hasProgress&&(o=(i.index-1)/(i.slides-1)*100)}else{if(i.index==i.slides)return TweenMax.to(l,.35,{x:"-=75px",ease:Power2.easeIn,onComplete:i.endpointReset});i.index=i.index+1,s=n.getNextPosition(),t=1*s.left,n.hasProgress&&(o=(i.index-1)/(i.slides-1)*100)}n.hasProgress&&TweenMax.to(r,1.1,{x:o+"%",ease:Back.easeOut.config(1)}),i.current=n.getCurrentSlide(),TweenMax.to(l,i.slideTime,{scrollTo:{x:t},ease:Power1.easeOut,force3D:!0,immediateRender:!0}),$(window).resize(function(e){s=n.getNextPosition(),t=1*s.left,TweenMax.set(l,{scrollTo:{x:t},ease:Power1.easeOut})})},this.loadNextScene=""}
function FifteenFourVideoPlayer(e){var o,n=this;o={name:"Area 15 Video Player",container:$(".MMVP-video")},$.extend(!0,o,e),this.name=o.name,this.container=o.container,this.video="",this.isUserActive="",this.init=function(){n.container.find("video").removeAttr("controls"),n.video=modal.current.find("video")[0],n.isUserActive=!0,n.playPause.init(),n.progress.init(),n.volume.init(),n.contextMenu(),n.autoHideControls.init(),n.keyboardShortcuts.init(),(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)&&n.fullscreen.init()},this.DOMReset=function(){o.container=$(o.container.selector),n.init()},this.playPause={playVideo:"",pauseVideo:"",init:function(){n.container.find(".MMVP-video-controls-play-pause").on("click",function(){n.video.paused?n.video.play():n.video.pause()}),modal.videoPlayer.playPause.playVideo=function(){n.container.find(".MMVP-video-controls-play-pause").addClass("MMVP-play-controls-play-pause-pause-state"),n.autoHideControls.changeUserActivity(),n.autoHideControls.setActivityCheck()},modal.videoPlayer.playPause.pauseVideo=function(){n.container.find(".MMVP-video-controls-play-pause").removeClass("MMVP-play-controls-play-pause-pause-state"),window.clearInterval(n.autoHideControls.activityCheck),window.clearTimeout(n.autoHideControls.inactivityTimeout),n.container.find(".modal-video-inner-container").removeClass("MMVP-inactive")},n.video.addEventListener("play",n.playPause.playVideo,!1),n.video.addEventListener("pause",n.playPause.pauseVideo,!1)}},this.progress={updateProgressIndicator:"",updateProgressBar:"",updateProgress:"",init:function(){function e(e){0>e?e=0:e>100&&(e=100);var o=modal.videoPlayer.video.duration*(e/100);n.video.currentTime=o,n.progress.updateProgress()}var o=n.video.duration;Number.prototype.toHHMMSS=function(){var e,o=this,n=Math.floor(o/3600),t=Math.floor((o-3600*n)/60),i=Math.floor(o-3600*n-60*t);return 10>n&&(n="0"+n),10>t&&(t="0"+t),10>i&&(i="0"+i),e=n>0?n+":"+t+":"+i:t+":"+i},n.progress.updateProgressIndicator=function(){n.container.find(".MMVP-video-progress-indicator").html('<span class="MMVP-video-current-time">'+modal.videoPlayer.video.currentTime.toHHMMSS()+"</span> / "+o.toHHMMSS())},n.progress.updateProgressBar=function(){var e=n.video.currentTime/o*100;e>100?e=100:0>e&&(e=0),n.container.find(".MMVP-video-progress-bar").css("width",e+"%")},n.progress.updateProgress=function(){n.progress.updateProgressIndicator(),n.progress.updateProgressBar()},n.video.addEventListener("timeupdate",n.progress.updateProgress,!1),n.container.find(".MMVP-video-progress-bar-interaction").on("mousedown",function(o){var t=n.container.find(".MMVP-video-progress-bar-container").offset(),i=n.container.find(".MMVP-video-progress-bar-container").width(),r=(o.pageX-t.left)/i*100;e(r)}),n.container.find(".MMVP-video-progress-grabber-interaction").on("mousedown",function(o){o.stopPropagation(),o.preventDefault();var t=!0;n.video.paused||(n.video.pause(),t=!1),n.container.find(".MMVP-video-progress-bar").css("transition","0s");var i=n.container.find(".MMVP-video-progress-bar-container").offset(),r=o.pageX-i.left,s=n.container.find(".MMVP-video-progress-bar-container").width(),l=r/s*100;e(l),$(window).on("mousemove",function(o){o.preventDefault(),r=o.pageX-i.left,l=r/s*100,e(l)}),$(window).on("mouseup",function(){$(window).off("mousemove"),n.container.find(".MMVP-video-progress-bar").css("transition",""),t||n.video.play()})}),n.progress.updateProgress()}},this.volume={checkVolume:function(e){var o=n.container.find(".MMVP-video-controls-volume");return e>0?(e>100&&(e=100),n.video.muted&&(n.video.muted=!1,o.removeClass("MMVP-video-controls-volume-muted")),e>=66&&o.removeClass("MMVP-video-controls-volume-muted MMVP-video-controls-volume-quiet MMVP-video-controls-volume-normal"),e>=33&&66>e&&!o.hasClass("MMVP-video-controls-volume-normal")&&(o.removeClass("MMVP-video-controls-volume-muted MMVP-video-controls-volume-quiet MMVP-video-controls-volume-normal"),o.addClass("MMVP-video-controls-volume-normal")),33>e&&e>0&&!o.hasClass("MMVP-video-controls-volume-quiet")&&(o.removeClass("MMVP-video-controls-volume-muted MMVP-video-controls-volume-normal"),o.addClass("MMVP-video-controls-volume-quiet"))):0>=e&&(e=0,n.video.muted=!0,o.addClass("MMVP-video-controls-volume-muted")),e},changeVolumeSlider:function(e){var o=n.container.find(".MMVP-volume-slider-container").height(),t=(100-e)/100*o,i=n.volume.checkVolume(e);n.container.find(".MMVP-volume-slider-grabber-interaction").css("top",t),n.video.volume=i/100},init:function(){function e(){$(window).on("mousemove.volumeMousemove",function(e){e.preventDefault();var o=n.container.find(".MMVP-volume-slider-container").offset(),t=e.pageY-o.top,i=n.container.find(".MMVP-volume-slider-container").height();if(t>-1&&i>t){var r=Math.floor(99-t/i*100);n.volume.changeVolumeSlider(r)}}),$(window).on("mouseup.volumeMouseup",function(){$(window).off("mousemove.volumeMousemove"),$(window).off("mouseup.volumeMouseup")})}n.container.find(".MMVP-video-controls-volume").on("mousedown",function(){var e=n.video.volume;n.video.muted?n.video.muted&&0===n.video.volume?n.volume.changeVolumeSlider(50):(n.volume.checkVolume(100*e),n.video.volume=e):n.volume.checkVolume(0)}),n.container.find(".MMVP-volume-slider-box").on("mousedown",function(o){o.preventDefault();var t=n.container.find(".MMVP-volume-slider-container").offset(),i=o.pageY-t.top,r=n.container.find(".MMVP-volume-slider-container").height();if(i>-1&&r>i){var s=Math.floor(99-i/r*100);n.volume.changeVolumeSlider(s,!1)}else-1>=i?n.volume.changeVolumeSlider(100):i>=r&&n.volume.changeVolumeSlider(0);e()}),n.container.find(".MMVP-video-controls").on({mouseenter:function(e){window.clearInterval(n.autoHideControls.activityCheck),window.clearTimeout(n.autoHideControls.inactivityTimeout)},mousemove:function(e){n.autoHideControls.inactivityTimeout&&(window.clearInterval(n.autoHideControls.activityCheck),window.clearTimeout(n.autoHideControls.inactivityTimeout),n.autoHideControls.inactivityTimeout=!1)},mouseleave:function(e){n.video.paused||n.autoHideControls.setActivityCheck()}})}},this.fullscreen={fullscreenChange:"",init:function(){var e=n.container.find(".modal-video-inner-container")[0];n.container.find(".MMVP-video-controls-fullscreen-toggle").on("click",function(){null===document.fullscreenElement||null===document.webkitFullscreenElement||null===document.mozFullScreenElement||null===document.msFullscreenElement?e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen():document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}),n.fullscreen.fullscreenChange=function(){null===document.fullscreenElement||null===document.webkitFullscreenElement||null===document.mozFullScreenElement||null===document.msFullscreenElement?n.container.find(".MMVP-video-controls-fullscreen-toggle").removeClass("MMVP-fullscreen-toggle-fullscreen-state"):n.container.find(".MMVP-video-controls-fullscreen-toggle").addClass("MMVP-fullscreen-toggle-fullscreen-state")},document.addEventListener("fullscreenchange",n.fullscreen.fullscreenChange),document.addEventListener("webkitfullscreenchange",n.fullscreen.fullscreenChange),document.addEventListener("mozfullscreenchange",n.fullscreen.fullscreenChange),document.addEventListener("MSFullscreenChange",n.fullscreen.fullscreenChange)}},this.contextMenu=function(){var e=n.video;e.addEventListener("contextmenu",function(e){e.preventDefault()},!1)},this.autoHideControls={userActivity:"",changeUserActivity:"",activityCheck:"",inactivityTimeout:"",setActivityCheck:function(){var e=n.container.find(".modal-video-inner-container");n.autoHideControls.activityCheck=window.setInterval(function(){n.autoHideControls.userActivity&&(n.autoHideControls.userActivity=!1,n.isUserActive||(n.isUserActive=!0,e.removeClass("MMVP-inactive")),n.autoHideControls.inactivityTimeout&&window.clearTimeout(n.autoHideControls.inactivityTimeout),n.autoHideControls.inactivityTimeout=window.setTimeout(function(){n.autoHideControls.userActivity||(n.isUserActive=!1,e.addClass("MMVP-inactive"))},5e3))},250)},init:function(){n.autoHideControls.changeUserActivity=function(){n.autoHideControls.userActivity||(n.autoHideControls.userActivity=!0)},n.video.addEventListener("mousemove",n.autoHideControls.changeUserActivity)}},this.keyboardShortcuts={processKeyboardShortcuts:function(e){switch(e.preventDefault(),e.which){case 32:n.video.paused?n.video.play():n.video.pause();break;case 77:n.video.muted?(n.video.muted=!1,n.container.find(".MMVP-video-controls-volume").removeClass("MMVP-video-controls-volume-muted")):(n.video.muted=!0,n.container.find(".MMVP-video-controls-volume").addClass("MMVP-video-controls-volume-muted"))}n.autoHideControls.changeUserActivity()},init:function(){$(document).on("keydown",n.keyboardShortcuts.processKeyboardShortcuts)}},this.reset=function(){n.video&&(n.video.pause(),n.container.find(".MMVP-video-progress-grabber-interaction").off("mousedown"),n.container.find(".MMVP-video-progress-bar-interaction").off("mousedown"),n.container.find(".MMVP-volume-slider-box").off("mousedown"),n.container.find(".MMVP-video-controls").off("mouseenter mousemove mouseleave"),n.container.find(".MMVP-video-controls-volume").off("click"),n.container.find(".MMVP-video-controls-play-pause").off("click"),n.container.find(".MMVP-video-controls-fullscreen-toggle").off("click"),n.video.removeEventListener("play",n.playPause.playVideo),n.video.removeEventListener("pause",n.playPause.pauseVideo),n.video.removeEventListener("timeupdate",n.progress.updateProgress),n.video.removeEventListener("mousemove",n.autoHideControls.timer),window.clearInterval(n.autoHideControls.activityCheck),document.removeEventListener("fullscreenchange",n.fullscreen.fullscreenChange),document.removeEventListener("webkitfullscreenchange",n.fullscreen.fullscreenChange),document.removeEventListener("mozfullscreenchange",n.fullscreen.fullscreenChange),document.removeEventListener("MSFullscreenChange",n.fullscreen.fullscreenChange),$(document).off("keydown",n.keyboardShortcuts.processKeyboardShortcuts))}}
var vaultVideoController={viewIndex:0,currentVideo:"",isMoving:!1,setBeginningVideo:function(e){vaultVideoController.currentVideo=e},init:function(){function e(e){return"previous"===e?0===vaultVideoController.viewIndex?2:vaultVideoController.viewIndex-1:2===vaultVideoController.viewIndex?0:vaultVideoController.viewIndex+1}vaultVideoController.setBeginningVideo($(".main-vault-video-active")),$(".vault-nav-control").on("click",function(i){return vaultVideoController.isMoving?!1:void($(this).hasClass("nav-previous")?vaultVideoController.changeView(e("previous")):vaultVideoController.changeView(e("next")))}),$(".vault-player-button").not("#mazmen-chamber-button").on("click",function(e){if(vaultVideoController.isMoving)return!1;var i=$(this).data("to");if(i===vaultVideoController.viewIndex){new TimelineMax({onComplete:this.kill}).to([this,"#vault-player-indicator"],.05,{x:3}).to([this,"#vault-player-indicator"],1.5,{x:0,ease:Elastic.easeOut.config(.9,.1)});return!1}vaultVideoController.changeView(i)})},changeView:function(e){var i=$("#main-vault-video-container"),a=vaultVideoController.currentVideo[0],n="",t=function(){console.log("restoreUI"),vaultVideoController.isMoving=!1,$("#vault-player-button-container").removeClass("disabled"),$(a).removeClass("main-vault-video-staged"),n.removeEventListener("ended",t)};vaultVideoController.isMoving=!0,$("#vault-player-button-container").addClass("disabled"),$('.vault-player-button[data-to="'+vaultVideoController.viewIndex+'"]').removeClass("vault-player-button-active"),$('.vault-player-button[data-to="'+e+'"]').addClass("vault-player-button-active"),TweenMax.to("#vault-player-indicator",.65,{x:100*e+"%",force3D:!0,ease:Power1.easeInOut}),vaultVideoController.currentVideo.removeClass("main-vault-video-active"),a.currentTime=0,vaultVideoController.currentVideo=i.find(".main-vault-video[data-start="+vaultVideoController.viewIndex+"][data-end="+e+"]"),vaultVideoController.currentVideo.addClass("main-vault-video-staged main-vault-video-active"),n=vaultVideoController.currentVideo[0],n.play(),n.addEventListener("ended",t),vaultVideoController.viewIndex=e}},slider=new Area15Slider({name:"Main Slider",hasProgress:!0}),modal={current:"",initializingElement:"",events:function(){modal.initializingElement.on("click",function(e){e.preventDefault(),modal.launch($(this))}),$(".modal__box").on("click",function(e){e.stopPropagation()}),$(".js-close-modal").on("click",function(e){e.preventDefault(),modal.closeModal()})},init:function(){modal.loadModels.init(),modal.initializingElement=$(".js-modal"),modal.setupSlider(),modal.events()},setupSlider:function(){var e=new Area15Slider({name:"Modal Slider",navControl:$(".modal-nav-control"),slideTime:.8});modal.slider=e,modal.slider.init()},launch:function(e){if(modal.current=$(e.data("target")),modal.slider.slide=modal.current.find(".modal-slide"),modal.slider.slides=modal.slider.slide.length,modal.slider.current=$(modal.slider.slide[modal.slider.index-1]),modal.slider.container=modal.current.find(".modal-slide-container"),modal.slider.navControl=modal.current.find(".modal-nav-control"),modal.slider.slides>1&&modal.current.find(".modal-nav-control").css("display","inline"),modal.current.addClass("is-staged is-visible"),modal.current.find(".MMVP-video").length){var i=new FifteenFourVideoPlayer({name:"Modal Video Player"});modal.videoPlayer=i,modal.videoPlayer.container=modal.current.find(".MMVP-video"),modal.videoPlayer.init()}modal.current.find(".modal-model-container").length&&(modal.slider.loadNextScene={scene:"",controls:"",currentModelPath:"",currentModelCameraPosition:"",currentModelPosition:"",init:function(){function e(){function e(e){for(var i in e)e[i]=Number(e[i]);return e}function a(){modal.slider.canvas.find(".webgl-rendering-indicator").removeClass("loading-in-progress"),modal.slider.canvas.find(".webgl-rendering-indicator").addClass("loading-done")}var l="",s=e(modal.slider.loadNextScene.currentModelPosition),r=e(modal.slider.loadNextScene.currentModelCameraPosition);$(".modal-model-container").each(function(e){return $(this).is(modal.slider.canvas)?void(l=e):void 0});var d=modal.loadModels.models[l].mesh,m=modal.loadModels.models[l].edges;t.add(d),t.add(m),d.position.set(s[0],s[1],s[2]),m.position.set(s[0],s[1],s[2]),u=(new THREE.Box3).setFromObject(d);var g=Math.max(u.max.x,u.max.y,u.max.z);c.minDistance=1.25*g,c.maxDistance=5*g,o.position.z=3*g,o.position.set(r[0],r[1],r[2]),o.lookAt(new THREE.Vector3(s[0],s[1],s[2])),TweenMax.to(n,1.5,{autoAlpha:1,ease:Power1.easeIn,delay:2,onComplete:a}),i()}function i(){t=modal.slider.loadNextScene.scene,c=modal.slider.loadNextScene.controls,null!==t&&(c.update(),a())}function a(){m.render(modal.slider.loadNextScene.scene,o)}modal.slider.canvas=modal.slider.current.find(".modal-model-container"),modal.slider.loadNextScene.currentModelPath=modal.slider.canvas.data("model-path"),modal.slider.loadNextScene.currentModelCameraPosition=modal.slider.canvas.data("camera-position").split(" "),modal.slider.loadNextScene.currentModelPosition=modal.slider.canvas.data("model-position").split(" ");var n,t,o,l,s,r,d,c,m,u;n=modal.slider.canvas.find("canvas"),modal.slider.loadNextScene.scene=new THREE.Scene,t=modal.slider.loadNextScene.scene,o=new THREE.PerspectiveCamera(45,modal.slider.canvas.width()/modal.slider.canvas.height(),.1,1e4),l=new THREE.HemisphereLight(16777147,526368,.5),t.add(l),s=new THREE.SpotLight(15792383),s.position.set(5,5,0),s.castShadow=!0,s.shadowMapWidth=1024,s.shadowMapHeight=1024,s.shadowCameraNear=500,s.shadowCameraFar=4e3,s.shadowCameraFov=30,s.intensity=5,t.add(s),r=s.clone(),r.position.set(0,6,2),r.intensity=1,t.add(r),d=s.clone(),d.position.set(-8,-2,-4),d.color.setHex(1447718),d.intensity=5,t.add(d),modal.slider.loadNextScene.controls=new THREE.OrbitControls(o,modal.slider.canvas[0]),c=modal.slider.loadNextScene.controls,c.addEventListener("change",a),m=new THREE.WebGLRenderer({alpha:!0,canvas:n[0],antialias:!0}),m.setSize(modal.slider.canvas.width(),modal.slider.canvas.height()),e(),$(window).on("resize.webGLResize",function(e){var i=modal.slider.canvas.width(),n=modal.slider.canvas.height();o.aspect=i/n,o.updateProjectionMatrix(),m.setSize(i,n),a()})}},modal.slider.loadNextScene.init&&modal.current.find(".modal-model-container").length&&modal.slider.loadNextScene.init()),modal.slider.reset=function(){modal.slider.loadNextScene&&(modal.slider.loadNextScene.controls.dispose(),modal.slider.loadNextScene.controls=null,modal.slider.loadNextScene.scene=null,$(window).off("resize.webGLResize"),delete modal.slider.loadNextScene),modal.slider.index=1,modal.slider.current="",modal.slider.slides="",TweenMax.set(modal.current.find(".modal-slide-container"),{scrollTo:{x:0}})}},DOMReset:function(){modal.initializingElement=$(modal.initializingElement.selector),modal.events(),modal.init()},closeModal:function(){modal.current.removeClass("is-visible"),window.setTimeout(function(){modal.current.removeClass("is-staged"),modal.slider.reset(),modal.videoPlayer&&modal.videoPlayer.reset()},250)},loadModels:{canvases:[],loaders:[],models:[],counter:0,init:function(){$(".modal-model-container").each(function(e){modal.loadModels.canvases[e]=$(this),modal.loadModels.loaders[e]=new THREE.JSONLoader;var i=$(this).data("model-path"),a=modal.loadModels.loaders[e],n=function(i,a){modal.loadModels.models[e]={};var n=new THREE.Mesh(i,new THREE.MeshPhongMaterial({color:"#101010",side:THREE.DoubleSide,emissive:"#000000",specular:"#111111",shininess:20,shading:THREE.SmoothShading,transparent:!0,opacity:.8})),t=new THREE.EdgesHelper(n,"rgb(200,200,200)");t.material.transparency=!0,t.material.opacity=.8,t.material.linewidth=.15,n.position.set(0,-1,0),n.scale.set(.1,.1,.1),modal.loadModels.models[e].mesh=n,modal.loadModels.models[e].edges=t};a.load(i,n),modal.loadModels.counter=modal.loadModels.counter++,modal.loadModels.counter==$(".modal-model-container").length})}}},uiActiveStates={current:"",activeState:"",rotateRight:"",flicker:$(".js-ui-flicker"),init:function(){$(".js-ui-interactive").hover(function(){uiActiveStates.current=$(this),uiActiveStates.activeState=uiActiveStates.current.find(".js-ui-active"),uiActiveStates.rotateRight=uiActiveStates.current.find(".js-ui-rotate-right"),TweenMax.to(uiActiveStates.activeState,.65,{autoAlpha:1}),TweenMax.to(uiActiveStates.rotateRight,.65,{rotation:45,ease:Power1.easeOut,force3D:!0})},function(){TweenMax.to(uiActiveStates.activeState,.65,{autoAlpha:0}),TweenMax.to(uiActiveStates.rotateRight,.65,{rotation:0,ease:Power1.easeOut,force3D:!0})}),uiActiveStates.animateFlicker()},animateFlicker:function(){uiActiveStates.flicker.each(function(e){var i=$(this),a=function(){var e=4*Math.random();TweenMax.to(i,e,{autoAlpha:1,yoyo:!0,repeat:1,onComplete:a})};a()})}},loadingScreen={init:function(){TweenMax.to(".loading-indicator, .area-15-logo",2,{opacity:1,onComplete:loadingScreen.runAnimationsOnce,delay:.5})},runAnimationsOnce:function(){TweenMax.to($(".slider-container"),1,{scrollTo:{x:3e3},force3D:!0,yoyo:!0,repeat:1,onComplete:loadingScreen.clearScreen})},clearScreen:function(){var e=$(".loading-screen");e.removeClass("is-visible"),window.setTimeout(function(){e.removeClass("is-staged"),e.addClass("is-hidden")},250)}},tooltips={current:"",title:"",init:function(){var e=$(".tooltip");$(".js-tooltip").on({mouseenter:function(i){tooltips.current=$(this),tooltips.title=tooltips.current.data("title"),$(".tooltip-text").html(tooltips.title),e.addClass("tooltip-reveal")},mousemove:function(i){var a=i.pageX,n=i.pageY;TweenMax.set(e,{x:a-15,y:n-20,force3D:!0})},mouseleave:function(i){e.removeClass("tooltip-reveal")}})}},magnifyingGlass={defaultGlassSize:200,maxGlassSize:400,minGlassSize:150,currentGlassSize:200,effects:{blur:0,contrast:100},currentSpecimen:{image:"",offset:"",width:"",height:""},enlargedSpecimen:{image:"",width:"",height:""},isVisible:!1,isFirefox:!1,init:function(){function e(e,i){var a=magnifyingGlass.currentSpecimen.image.offset(),o=(e-a.left)*(magnifyingGlass.enlargedSpecimen.width/magnifyingGlass.currentSpecimen.width*-1)+magnifyingGlass.maxGlassSize/2,l=(i-a.top)*(magnifyingGlass.enlargedSpecimen.height/magnifyingGlass.currentSpecimen.height*-1)+magnifyingGlass.maxGlassSize/2;TweenMax.set(n,{x:e-magnifyingGlass.maxGlassSize/2,y:i-magnifyingGlass.maxGlassSize/2,force3D:!0}),TweenMax.set(t,{backgroundPosition:o+"px "+l+"px"})}function i(){function e(){var e=0,i=-.05*a+40+"%",n=100-(-.05*a+40)+"%",t=-.11*(magnifyingGlass.currentGlassSize-magnifyingGlass.minGlassSize)+57.5+"%";0>a?e=a/-2:a>0&&(e=a>=125?50-30*magnifyingGlass.maxGlassSize/magnifyingGlass.currentGlassSize:50),TweenMax.to(m,.25,{x:e,force3D:!0,overwrite:!0}),TweenMax.to([u,g],.1,{attr:{y1:i,y2:n},overwrite:!0}),TweenMax.to(f,.1,{attr:{cy:t},overwrite:!0})}var i=magnifyingGlass.currentGlassSize/2,a=magnifyingGlass.currentGlassSize-magnifyingGlass.defaultGlassSize,n=0;a>=0&&(n=.45*magnifyingGlass.currentGlassSize-90),TweenMax.to(l,.1,{attr:{r:i},overwrite:!0}),TweenMax.to(s,.1,{attr:{r:i+2},overwrite:!0}),TweenMax.to(o,.1,{x:a/2,force3D:!0,overwrite:!0}),TweenMax.to(r,.1,{attr:{r:i+8},overwrite:!0,delay:.01}),TweenMax.to(c,.1,{scale:magnifyingGlass.currentGlassSize/magnifyingGlass.defaultGlassSize,force3D:!0,overwrite:!0,delay:.01,transformOrigin:"left center"}),TweenMax.to(v,.1,{attr:{r:i-8,delay:.01},overwrite:"concurrent"}),TweenMax.set(d,{rotation:n,force3D:!0}),e()}function a(e){function i(){TweenMax.set(t,{"-webkit-filter":"blur("+magnifyingGlass.effects.blur+"px) contrast("+magnifyingGlass.effects.contrast+"%)",filter:"blur("+magnifyingGlass.effects.blur+"px) contrast("+magnifyingGlass.effects.contrast+"%)"})}function a(){Math.abs(e)>=5&&TweenMax.to(magnifyingGlass.effects,.225,{blur:0,contrast:100,overwrite:!0,ease:Power1.easeInOut,onUpdate:i})}var n={blur:Math.min(Math.max(Math.abs(e/1.5),0),7),contrast:100+Math.min(Math.max(Math.abs(8*e),0),200)};Math.abs(e)<5&&(n.blur=0,n.contrast=100),TweenMax.to(magnifyingGlass.effects,.075,{blur:n.blur,contrast:n.contrast,overwrite:!0,ease:Power1.easeInOut,onUpdate:i,onComplete:a})}var n=$(".magnifying-glass"),t=n.find(".magnifying-glass-image"),o=(n.find(".magnifying-glass-border"),n.find(".magnifying-glass-icon")),l=n.find("#inner-clip").find("circle"),s=n.find("#outer-clip").find("circle"),r=n.find("#outer-scope"),d=n.find("#sights"),c=n.find("#half-circle"),m=n.find("#guage"),u=n.find("#ticks"),g=n.find("#tick-line"),f=n.find("#indicator"),v=n.find("#inner-scope");TweenMax.set(n,{scaleX:0,scaleY:0,scaleZ:0,force3D:!0}),$(window).one("DOMMouseScroll",function(e){magnifyingGlass.isFirefox=!0,console.log("firefox")}),$(".js-magnify").on({mouseenter:function(){$(window).on("wheel.magnifyingGlassWheel",function(e){$("#sights").addClass("rotated");var n=e.originalEvent.deltaY,t=-1*n/8;magnifyingGlass.isFirefox&&(t=-1*n);var o=Math.min(Math.max(magnifyingGlass.currentGlassSize+=t,150),400);magnifyingGlass.currentGlassSize=o,i(),a(t)}),TweenMax.to(n,.25,{scaleX:1,scaleY:1,scaleZ:1,force3D:!0,ease:Back.easeOut}),magnifyingGlass.currentSpecimen.image=$(this),magnifyingGlass.currentSpecimen.offset=magnifyingGlass.currentSpecimen.image.offset(),magnifyingGlass.currentSpecimen.width=magnifyingGlass.currentSpecimen.image.width(),magnifyingGlass.currentSpecimen.height=magnifyingGlass.currentSpecimen.image.height(),magnifyingGlass.enlargedSpecimen.image=new Image;var e=magnifyingGlass.currentSpecimen.image[0].src;magnifyingGlass.enlargedSpecimen.image.src=e,magnifyingGlass.enlargedSpecimen.width=magnifyingGlass.enlargedSpecimen.image.width,magnifyingGlass.enlargedSpecimen.height=magnifyingGlass.enlargedSpecimen.image.height,t.css({width:magnifyingGlass.enlargedSpecimen.width+"px",height:magnifyingGlass.enlargedSpecimen.height+"px",backgroundImage:"url("+e+")"}),n.addClass("magnifying-glass-reveal")},mousemove:function(i){magnifyingGlass.isVisible||(n.addClass("magnifying-glass-reveal"),magnifyingGlass.isVisible=!0),e(i.pageX,i.pageY)},mouseleave:function(e){$(window).off("wheel.magnifyingGlassWheel"),n.removeClass("magnifying-glass-reveal"),TweenMax.to(n,.25,{scaleX:0,scaleY:0,scaleZ:0,force3D:!0,ease:Back.easeIn}),magnifyingGlass.currentGlassSize=magnifyingGlass.defaultGlassSize,i()}})}},dynamicImageLoad={checkAndReplace:function(e){e.each(function(e){var i,a,n,t,o,l;i=$(this),"none"!==$(this).css("background-image")?(a=function(e){i.css("background-image",e)},n=$(this).css("background-image")):(a=function(e){i.attr("src",e)},n=$(this).attr("high-res-src")),t=n.lastIndexOf("/"),o=n.lastIndexOf("."),window.matchMedia("(-webkit-min-device-pixel-ratio: 1.5) and (min-resolution: 144dpi)").matches?a(n):(l=n.slice(0,t)+"/low-res"+n.slice(t,o)+"-low-res"+n.slice(o,n.length),a(l))})},init:function(){dynamicImageLoad.checkAndReplace($("img, .slide, .nav-progress-indicator, .scroll-teeth"))}},vaultVideoSizing={container:"",video:"",correctAspectRatio:function(){window.matchMedia("screen and (min-aspect-ratio:16/9)").matches?(vaultVideoSizing.video.removeClass("by-height"),vaultVideoSizing.video.addClass("by-width")):(vaultVideoSizing.video.removeClass("by-width"),vaultVideoSizing.video.addClass("by-height"))},init:function(){vaultVideoSizing.container=$("#main-vault-video-container"),vaultVideoSizing.video=vaultVideoSizing.container.find("video"),vaultVideoSizing.correctAspectRatio(),$(window).on("resize",function(e){vaultVideoSizing.correctAspectRatio()})}};$(document).ready(function(e){dynamicImageLoad.init()}),$(window).load(function(e){slider.init(),modal.init(),uiActiveStates.init(),tooltips.init(),magnifyingGlass.init(),vaultVideoSizing.init(),vaultVideoController.init()});